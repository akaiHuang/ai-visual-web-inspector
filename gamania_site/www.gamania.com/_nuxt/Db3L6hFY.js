import{aN as D,aU as U,bB as f,ao as v,bC as A,av as M,ab as O,w as j,bD as w,J as S}from"#entry";function E(){const i=U();return D(i.public["nuxt-schema-org"],{scriptAttributes:{}})}function h(i){const o=E(),n={type:"application/ld+json",key:"schema-org-graph",nodes:i,tagPriority:"high",...o.scriptAttributes};if(o?.reactive)return f({script:[n]})}function $(i,o){return i||(i={}),i._resolver=o,i}function L(i){return $(i,"article")}function _(i){return $(i,"breadcrumb")}function I(i){return $(i,"video")}function x(i){return $(i,"webPage")}const R=()=>{const i=v(),o=A(),n=M(),{t:d,locale:y}=O(),r="https://www.gamania.com",p="/wordpress/wp-json/wp/v2",g={zh:"",en:"en/",ja:"ja/",ko:"ko/"};return{setMeta:async(e,s)=>{let a;const t=[];if(s)a=s;else{const c=e?.seo?.ogimage?.[0];c&&(a=await $fetch(`${p}/media/${c}`))}e?.seo?.object?.[0]?.[0]?.breadcrumblist?.[0]?.itemlistelements&&e?.seo?.object?.[0]?.[0]?.breadcrumblist?.[0]?.itemlistelements?.forEach(c=>{t.push({name:c.name,item:c.item})});const m=[];o.value.link.forEach(c=>{c.rel==="alternate"&&m.push({rel:c.rel,href:c.href,hreflang:c.hreflang})}),m.push({rel:"canonical",href:`${r}${i.path}`}),j(y,()=>{i.name.includes("gplay-id")||f({link:m})}),n.runWithContext(()=>{i.name.includes("gplay-id")||f({link:m}),w({title:e?.seo?.pagetitle,description:e?.seo?.metadescription,ogSiteName:d("breadcrumb.gamania"),ogType:"website",ogUrl:`${r}${i.path}`,ogTitle:e?.seo?.pagetitle,ogDescription:e?.seo?.metadescription,ogImage:a?.url||a?.source_url,ogImageWidth:"1200",ogImageHeight:"630",ogImageType:"image/jpeg",twitterTitle:e?.seo?.pagetitle,twitterDescription:e?.seo?.metadescription,twitterImage:a?.url||a?.source_url,twitterCard:"summary_large_image"}),h([x({name:e?.seo?.pagetitle,description:e?.seo?.metadescription,primaryImageOfPage:a?.url||a?.source_url,breadcrumb:{"@id":`${r}${i.path}#breadcrumb-${i.name}`}}),_({itemListElement:t})])})},setShortMeta:async(e,s)=>{const a=[],t={};(await $fetch(`${p}/short?slug=${e.slug}`)).forEach(l=>{t[l.language]={id:l.id,url:`/${g[l.language]}gplay/${l.id}`}}),o.value.link.forEach(l=>{if(l.rel==="alternate")if(l.hreflang==="x-default")a.push({rel:l.rel,href:t.zh?`${r}${t.zh.url}`:l.href,hreflang:l.hreflang});else{const u=Object.keys(t).find(b=>l.hreflang.includes(b));u?a.push({rel:l.rel,href:`${r}${t[u].url}`,hreflang:l.hreflang}):a.push({rel:l.rel,href:l.href,hreflang:l.hreflang})}}),a.push({rel:"canonical",href:`${r}${t.zh.url}`});const c=[{name:d("breadcrumb.gamania"),item:`${r}/`},{name:d("breadcrumb.gplay"),item:`${r}/${g[e?.language]}gplay`},{name:e?.videoTitle,item:`${r}/${g[e?.language]}gplay/${e?.id}`}];n.runWithContext(()=>{f({link:a}),w({title:e?.videoTitle,description:e?.description?.join(""),ogSiteName:d("breadcrumb.gamania"),ogType:"website",ogUrl:`${r}/${g[e?.language]}gplay/${e?.id}`,ogTitle:e?.videoTitle,ogDescription:e?.description?.join(""),ogImage:s?.source_url,ogImageWidth:"1200",ogImageHeight:"630",ogImageType:"image/jpeg",twitterTitle:e?.videoTitle,twitterDescription:e?.description?.join(""),twitterImage:s?.source_url,twitterCard:"summary_large_image"}),h([x({name:e?.videoTitle,description:e?.description?.join(""),primaryImageOfPage:s?.source_url,breadcrumb:{"@id":`${r}/${g[e?.language]}gplay/${e?.id}#breadcrumb-${i.name}`}}),_({itemListElement:c}),I({name:e?.videoTitle,description:e?.description?.join(""),thumbnailUrl:s?.source_url,contentUrl:e?.preview?.[0],embedUrl:e?.url,uploadData:e?.date,duration:e?.duration})])})},setPostMeta:async(e,s)=>{let a=null;e?.meta_box?.article?.image?.[0]?a=await $fetch(`${p}/media/${e?.meta_box?.article?.image?.[0]}`):a={source_url:`${r}/images/default-article-image.png`},n.runWithContext(()=>{const t=n.payload.data?.[`languageAlts-${s}-${e?.slug}`],m=[];o.value.link.forEach(u=>{if(u.rel==="alternate")if(u.hreflang==="x-default")m.push({rel:u.rel,href:t.zh?`${r}${t.zh.url}`:u.href,hreflang:u.hreflang});else{const b=Object.keys(t).find(T=>u.hreflang.includes(T));b?m.push({rel:u.rel,href:`${r}${t[b].url}`,hreflang:u.hreflang}):m.push({rel:u.rel,href:u.href,hreflang:u.hreflang})}}),m.push({rel:"canonical",href:`${r}${t.zh.url}`});const c=[{name:d("breadcrumb.gamania"),item:`${r}/`},{name:d(s==="news"?"breadcrumb.news":"breadcrumb.awards"),item:`${r}/${g[e?.language]}${s}`},{name:e?.meta_box?.article?.headline,item:`${r}/${g[e?.language]}${s}/${e?.id}`}],l={author:{"@id":"https://www.gamania.com/#identity"},headline:e?.meta_box?.article?.headline,image:a?.source_url,description:e?.meta_box?.customDescription?.join(""),dataModified:e?.modified,datePublished:e?.date};j(y,async()=>{await S(),f({link:m})}),f({link:m}),w({title:e?.meta_box?.article?.headline,description:e?.meta_box?.customDescription?.join(""),ogSiteName:d("breadcrumb.gamania"),ogType:"website",ogUrl:`${r}/${g[e?.language]}${s}/${e?.id}`,ogTitle:e?.meta_box?.article?.headline,ogDescription:e?.meta_box?.customDescription?.join(""),ogImage:a?.source_url,ogImageWidth:"1200",ogImageHeight:"630",ogImageType:"image/jpeg",twitterTitle:e?.meta_box?.article?.headline,twitterDescription:e?.meta_box?.customDescription.join(""),twitterImage:a?.source_url,twitterCard:"summary_large_image"}),h([x({name:e?.meta_box?.article?.headline,description:e?.meta_box?.customDescription?.join(""),primaryImageOfPage:a?.source_url,breadcrumb:{"@id":`${r}/${g[e?.language]}${s}/${e?.id}#breadcrumb-${i.name}`}}),_({itemListElement:c}),L(l)])})},setFocusNewsSchemaOrgVideo:e=>{let s=[];e?.length>0&&(e.forEach(a=>{s.push(I({name:a?.meta_box?.article?.headline,description:a?.meta_box?.description?.join(""),thumbnailUrl:a?.featured_media?.url,contentUrl:a?.meta_box?.video?.length>0?a?.meta_box?.video:a?.meta_box?.href,embedUrl:`https://www.gamania.com/${g[a?.language]}`,uploadData:a?.date?.split(" ")[0]}))}),h(s))}}};export{R as u};
